{"$defs": {"ConfigUrl": {"additionalProperties": false, "description": "Bootstrap configuration from remote location.\nThe configuration is fetched from the remote url\nat startup and override all local settings.", "properties": {"ssl": {"anyOf": [{"$ref": "#/$defs/SSLConfig"}, {"type": "null"}], "default": null}, "url": {"anyOf": [{"format": "uri", "minLength": 1, "type": "string"}, {"type": "null"}], "default": null, "description": "Url to external configuration.\nThe server will issue a GET method against this url at startup.\nThe method should returns a valid configuration fragment.", "title": "External configuration Url"}}, "title": "ConfigUrl", "type": "object"}, "ListenConfig": {"additionalProperties": false, "properties": {"listen": {"anyOf": [{"type": "string"}, {"maxItems": 2, "minItems": 2, "prefixItems": [{"type": "string"}, {"type": "integer"}], "type": "array"}], "default": ["[::]", 23456], "title": "TCP:PORT interface or unix socket"}, "ssl": {"allOf": [{"$ref": "#/$defs/SSLConfig"}], "default": {"ca": null, "cert": null, "key": null}}}, "title": "ListenConfig", "type": "object"}, "LoggingConfig": {"additionalProperties": false, "properties": {"level": {"default": "INFO", "enum": ["NOTSET", "TRACE", "DEBUG", "INFO", "REQ", "RREQ", "WARNING", "ERROR", "CRITICAL"], "title": "Level", "type": "str"}}, "title": "LoggingConfig", "type": "object"}, "ProjectsConfig": {"additionalProperties": false, "properties": {"strict_check": {"default": true, "description": "Activate strict checking of project layers.\nWhen enabled, Qgis projects with invalid layers will be dismissed.\nTrying to access such a project will lead to a 'unprocessable Entity'\n(422) HTTP error", "title": "Enable strict checking", "type": "boolean"}, "trust_layer_metadata": {"default": false, "description": "Trust layer metadata.\nImproves layer load time by skipping expensive checks\nlike primary key unicity, geometry type and\nsrid and by using estimated metadata on layer load.\nSince QGIS 3.16", "title": "Trust layer metadata", "type": "boolean"}, "disable_getprint": {"default": false, "description": "Don't load print layouts.\nImproves project read time if layouts are not required,\nand allows projects to be safely read in background threads\n(since print layouts are not thread safe).", "title": "Disable GetPrint requests", "type": "boolean"}, "force_readonly_layers": {"default": false, "description": "Force layers to open in read only mode", "title": "Force read only mode", "type": "boolean"}, "disable_advertised_urls": {"default": false, "description": "Disable ows urls defined in projects.\nThis may be necessary because Qgis projects\nurls override proxy urls.", "title": "Disable OWS advertised urls", "type": "boolean"}, "search_paths": {"additionalProperties": {"type": "str"}, "default": {}, "description": "Defines mapping betweeen location base path and storage handler root url.\nResource path relative to location will be joined the the root url path.\nIn the case of Qgis storage, the handler is responsible for transforming\nthe result url into a comprehensive format for the corresponding\nQgsProjectStorage implementation.\nThis is handled by the default storage implementation for Qgis native\nproject storage. In case of custom QgsProjectStorage, if the scheme does not allow passing\nproject as path component, it is possible to specify a custom resolver function.", "title": "Scheme mapping definitions", "type": "object"}, "allow_direct_path_resolution": {"default": true, "description": "Allow direct path resolution if there is\nno matching from the search paths.\nUri are directly interpreted as valid Qgis project's path.\nWARNING: allowing this may be a security vulnerabilty.", "title": "Allow direct path resolution", "type": "boolean"}}, "title": "ProjectsConfig", "type": "object"}, "QgisPluginConfig": {"additionalProperties": false, "properties": {"paths": {"default": [], "description": "List of search paths for plugins.\nAll Qgis plugins found will be loaded\nif they are compatible with the current\nQgis version.", "items": {"format": "path", "type": "string"}, "title": "Plugin paths", "type": "array"}}, "title": "QgisPluginConfig", "type": "object"}, "SSLConfig": {"additionalProperties": false, "properties": {"ca": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "CA file"}, "cert": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "description": "Path to the SSL key file", "title": "SSL/TLS key"}, "key": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "description": "Path to the SSL certificat file", "title": "SSL/TLS Certificat"}}, "title": "SSLConfig", "type": "object"}, "WorkerConfig": {"additionalProperties": false, "properties": {"name": {"default": "default", "title": "Name of the worker instance", "type": "string"}, "description": {"default": "", "description": "Description for administrative purpose", "title": "Description", "type": "string"}, "projects": {"allOf": [{"$ref": "#/$defs/ProjectsConfig"}], "default": {"allow_direct_path_resolution": true, "disable_advertised_urls": false, "disable_getprint": false, "force_readonly_layers": false, "search_paths": {}, "strict_check": true, "trust_layer_metadata": false}, "description": "Projects and cache configuration", "title": "Projects configuration"}, "max_projects": {"default": 50, "description": "The maximum number of projects allowed in cache.\nThe default value is set to 50 projects. ", "title": "Max number of projects in cache", "type": "integer"}, "load_project_on_request": {"default": true, "description": "Load project in cache at request.\nIf set to 'false', project not loaded in cache will\nreturn a 403 HTTP code when requested.\nThus, adding project's to cache will require a specific\naction from another service or admininstrative\nmanagement tools.", "title": "Load project in cache when requested", "type": "boolean"}, "reload_outdated_project_on_request": {"default": false, "description": "Reload outdated project at request.\nIf set to 'false', outdated project in cache will\nnot be refreshed when requested.\nThus, refreshing project's to cache will require a specific\naction from another service or admininstrative\nmanagement tools.", "title": "Reload outdated project when requested", "type": "boolean"}, "plugins": {"allOf": [{"$ref": "#/$defs/QgisPluginConfig"}], "default": {"paths": []}, "title": "Plugins configuration"}, "max_chunk_size": {"default": 1048576, "description": "Set the maximum chunk size for streamed responses.", "title": "Maximum chunk size", "type": "integer"}, "interfaces": {"default": [{"listen": ["[::]", 23456], "ssl": {"ca": null, "cert": null, "key": null}}], "items": {"$ref": "#/$defs/ListenConfig"}, "minItems": 1, "title": "Interfaces to listen to", "type": "array"}, "max_waiting_requests": {"default": 20, "description": "The maximum number of requests that can be\nqueued for this worker task. If the number of\nwaiting requests reach the limit, the subsequent\nrequests will be returned with a `service unavailable`\nerror", "title": "Max number of concurrent requests", "type": "integer"}, "process_timeout": {"default": 20, "description": "Set the amount of time in seconds before considering\nconsidering that a process is stalled.\nA stalled process will be terminated and the server will\nexit with an error code", "title": "Stalled process timeout", "type": "integer"}, "shutdown_grace_period": {"default": 20, "description": "The maximum amount of time to wait before\nclosing connections. During this period,\nno new connections are allowed.", "title": "Shutdown grace period", "type": "integer"}, "max_processes_failure_pressure": {"default": 0.0, "description": "The maximum ratio of terminated/initial processes\nallowed. If this limit is reached,  the server will\nissue a critical failure before exiting.", "title": "Max allowed processes failure ratio", "type": "number"}, "num_processes": {"default": 1, "description": "Set the number of Qgis processes per worker.\nIf a processes crash, the worker is in a degraded\nstate. When the last process exit the worker will\nstop with an error code.\n\nIn order not to let the worker degrade itself slowly\nthe number of worker should be kept low (from 1 to 3)\nor keep a relatively low 'max_processes_failure_pressure'.\nNote: server must be restarted if this option is modified.", "title": "Number of Qgis processes", "type": "integer"}, "restore_cache": {"default": true, "description": "Restore stored cached projets at startup.\nNote that only projects loaded explicitely with\nthe admin api are stored for restoration.\ni.e projects loaded through requests (using\n'load_project_on_request' option) will not be\nrestored.", "title": "Restore cache at startup", "type": "boolean"}}, "title": "WorkerConfig", "type": "object"}}, "additionalProperties": false, "properties": {"logging": {"allOf": [{"$ref": "#/$defs/LoggingConfig"}], "default": {"level": "INFO"}}, "config_url": {"allOf": [{"$ref": "#/$defs/ConfigUrl"}], "default": {"ssl": null, "url": null}}, "worker": {"allOf": [{"$ref": "#/$defs/WorkerConfig"}], "default": {"description": "", "interfaces": [{"listen": ["[::]", 23456], "ssl": {"ca": null, "cert": null, "key": null}}], "load_project_on_request": true, "max_chunk_size": 1048576, "max_processes_failure_pressure": 0.0, "max_projects": 50, "max_waiting_requests": 20, "name": "default", "num_processes": 1, "plugins": {"paths": []}, "process_timeout": 20, "projects": {"allow_direct_path_resolution": true, "disable_advertised_urls": false, "disable_getprint": false, "force_readonly_layers": false, "search_paths": {}, "strict_check": true, "trust_layer_metadata": false}, "reload_outdated_project_on_request": false, "restore_cache": true, "shutdown_grace_period": 20}}}, "title": "BaseConfig", "type": "object"}
